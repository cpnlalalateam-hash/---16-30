<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MBTIãƒ¯ãƒ³ã‚³è¨ºæ–­ï¼ˆ4å•ã§16ã‚¿ã‚¤ãƒ—ï¼‰</title>
  <style>
    :root{
      --card-bg:#fff;
      --accent:#ff9f43;
      --muted:#666;
      --max-width:820px;
    }
    *{box-sizing:border-box}
    body{
      font-family: "Noto Sans JP", "Hiragino Sans", "Segoe UI", Roboto, sans-serif;
      background:#fcfbf8;
      margin:0;
      padding:28px;
      color:#222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    h1{margin:0 0 8px; font-size:1.6rem; text-align:center;}
    .container{max-width:var(--max-width); margin:12px auto;}
    .card{background:var(--card-bg); padding:18px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.06); margin-bottom:16px;}
    label{display:block; margin:8px 0; cursor:pointer;}
    input[type="text"]{padding:10px; width:100%; box-sizing:border-box; border-radius:8px; border:1px solid #e6e6e6; font-size:14px;}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap;}
    .btn{background:var(--accent); color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700; font-size:15px;}
    .btn.secondary{background:#888;}
    .result-title{font-size:1.2rem; margin:6px 0;}
    img.dog{
      width:100%;
      max-width:560px;
      height:auto;
      border-radius:14px;
      display:block;
      margin:18px auto;
      box-shadow:0 12px 28px rgba(0,0,0,0.12);
      object-fit:cover;
    }
    .muted{color:var(--muted);}
    .share-row{display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap;}
    .share-link{padding:10px 14px; color:#fff; text-decoration:none; border-radius:10px; display:inline-block; font-weight:700; font-size:14px;}
    .share-x{background:#000;}
    .share-copy{background:#16a34a;}
    .share-download{background:#2563eb;}
    #affinity-section{display:none; margin-top:12px;}
    .center{text-align:center;}
    @media(max-width:520px){
      img.dog{max-width:360px;}
      .btn{padding:10px 12px; font-size:14px;}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¾ MBTIãƒ¯ãƒ³ã‚³è¨ºæ–­ï¼ˆ4å•ãƒ»16ã‚¿ã‚¤ãƒ—å¯¾å¿œï¼‰</h1>

    <div id="quiz" class="card" aria-live="polite">
      <p><input id="user-name" type="text" placeholder="ã‚ãªãŸã®åå‰ï¼ˆä»»æ„ï¼‰"></p>

      <p><strong>Q1 â€” å¤–å‘ã‹å†…å‘ã‹ï¼Ÿ</strong></p>
      <label><input type="radio" name="q1" value="E"> å¤–å‘ï¼ˆEï¼‰ â€” äººã¨ã„ã‚‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã‚ã</label>
      <label><input type="radio" name="q1" value="I"> å†…å‘ï¼ˆIï¼‰ â€” ä¸€äººã§ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹æ–¹ãŒå¥½ã</label>

      <p><strong>Q2 â€” æ„Ÿè¦šï¼ˆSï¼‰ã‹ç›´è¦³ï¼ˆNï¼‰ï¼Ÿ</strong></p>
      <label><input type="radio" name="q2" value="S"> æ„Ÿè¦šï¼ˆSï¼‰ â€” ç¾å®Ÿã‚„äº‹å®Ÿã‚’é‡è¦–ã™ã‚‹</label>
      <label><input type="radio" name="q2" value="N"> ç›´è¦³ï¼ˆNï¼‰ â€” å…¨ä½“ã‚„å¯èƒ½æ€§ã‚’é‡è¦–ã™ã‚‹</label>

      <p><strong>Q3 â€” æ€è€ƒï¼ˆTï¼‰ã‹æ„Ÿæƒ…ï¼ˆFï¼‰ï¼Ÿ</strong></p>
      <label><input type="radio" name="q3" value="T"> æ€è€ƒï¼ˆTï¼‰ â€” è«–ç†ãƒ»å®¢è¦³ã‚’å„ªå…ˆã™ã‚‹</label>
      <label><input type="radio" name="q3" value="F"> æ„Ÿæƒ…ï¼ˆFï¼‰ â€” å…±æ„Ÿã‚„äººé–“é–¢ä¿‚ã‚’å„ªå…ˆã™ã‚‹</label>

      <p><strong>Q4 â€” åˆ¤æ–­ï¼ˆJï¼‰ã‹çŸ¥è¦šï¼ˆPï¼‰ã‹ï¼Ÿ</strong></p>
      <label><input type="radio" name="q4" value="J"> åˆ¤æ–­ï¼ˆJï¼‰ â€” è¨ˆç”»çš„ã§æ®µå–ã‚ŠãŒå¥½ã</label>
      <label><input type="radio" name="q4" value="P"> çŸ¥è¦šï¼ˆPï¼‰ â€” æŸ”è»Ÿã§æµã‚Œã«ä¹—ã‚‹æ–¹ãŒå¥½ã</label>

      <div class="center" style="margin-top:14px;">
        <button class="btn" onclick="onDiagnose()">è¨ºæ–­ã™ã‚‹ ğŸ¶</button>
        <button class="btn secondary" onclick="onReset()">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </div>

    <div id="result" class="card" style="display:none;">
      <div id="result-header">
        <div class="result-title" id="diagnosed-name"></div>
        <div class="muted center">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã‚³ãƒ¼ãƒ‰ï¼š<strong id="my-type-code"></strong></div>
      </div>

      <img id="dog-img" class="dog" src="" alt="çŠ¬ã®ç”»åƒ" />

      <div style="text-align:center; margin-top:8px;">
        <div id="dog-catch" style="font-weight:800; font-size:1.05rem;"></div>
        <p id="dog-detail" class="muted" style="margin-top:8px;"></p>
      </div>

      <div class="share-row" aria-hidden="false">
        <a id="btn-share-x" class="share-link share-x" target="_blank" rel="noopener">Xã§ã‚·ã‚§ã‚¢</a>
        <button id="btn-copy" class="share-link share-copy" onclick="copyResult()">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
        <a id="btn-download-image" class="share-link share-download" href="#" download="mbti_dog_result.jpg">ç”»åƒã‚’é–‹ãï¼ä¿å­˜</a>
      </div>

      <div id="affinity-section">
        <hr />
        <h3 style="margin:8px 0;">ğŸ¾ ç›¸æ€§è¨ºæ–­</h3>
        <p class="muted center">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ï¼š<strong id="show-my-type-inline"></strong></p>
        <p><input id="partner-code" type="text" placeholder="ç›¸æ‰‹ã®MBTIã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹ï¼šENFPï¼‰" style="padding:10px; width:100%; box-sizing:border-box;"></p>
        <div class="center">
          <button class="btn" onclick="checkAffinity()">ç›¸æ€§ã‚’è¨ºæ–­ã™ã‚‹</button>
        </div>
        <p id="affinity-result" style="margin-top:10px; text-align:center; font-weight:700;"></p>
      </div>

    </div>
  </div>

<script>
/* å…¨16ã‚¿ã‚¤ãƒ—ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆçŠ¬ç¨®åãƒ»ã‚­ãƒ£ãƒƒãƒãƒ»è©³ç´°ãƒ»ç›¸æ€§é…åˆ—ãƒ»ç”»åƒURLï¼‰ */
const DOG_TYPES = {
  "ISTJ": { name:"ãƒ‰ãƒ¼ãƒ™ãƒ«ãƒãƒ³", catch:"è¦å¾‹ã‚’é‡ã‚“ã˜ã‚‹è«–ç†çš„ãªå®ˆè­·çŠ¬", detail:"æºã‚‹ããªã„å¿ èª å¿ƒã¨ç¾å®Ÿçš„ãªåˆ¤æ–­åŠ›ã§å®ˆã‚‹ã‚¿ã‚¤ãƒ—ã€‚", affinity:["ENFP","ISFP","ESTP"], conflict:["INFP","ENFJ"], img:"https://cdn.pixabay.com/photo/2018/02/21/12/12/doberman-3166123_1280.jpg" },
  "ISFJ": { name:"ã‚­ãƒ£ãƒãƒªã‚¢", catch:"ç¾¤ã‚Œã®èª¿å’Œã‚’å®ˆã‚‹çŒ®èº«ã®ç™’ã—æ‰‹", detail:"ç´°ã‚„ã‹ãªæ°—é…ã‚Šã¨å®‰å®šæ„Ÿã§å‘¨å›²ã‚’æ”¯ãˆã‚‹å­˜åœ¨ã€‚", affinity:["ESFP","ISTP","ISFJ"], conflict:["ENTP","INTJ"], img:"https://cdn.pixabay.com/photo/2017/06/07/18/53/cavalier-2381532_1280.jpg" },
  "INFJ": { name:"æŸ´çŠ¬", catch:"é™ã‹ãªæ´å¯ŸåŠ›ã‚’æŒã¤é­‚ã®å‚è¬€", detail:"æ·±ã„å…±æ„Ÿã¨å¼·ã„ä¿¡å¿µã§äººã‚’å°ãç†æƒ³ä¸»ç¾©è€…ã€‚", affinity:["ENFP","ENTP","INFJ"], conflict:["ESTJ","ESTP"], img:"https://cdn.pixabay.com/photo/2017/12/29/18/14/shiba-inu-3043594_1280.jpg" },
  "INTJ": { name:"ãƒ­ãƒƒãƒˆãƒ¯ã‚¤ãƒ©ãƒ¼", catch:"åˆç†æ€§ã‚’è¿½æ±‚ã™ã‚‹å­¤é«˜ã®æˆ¦ç•¥å®¶", detail:"è¨ˆç”»ã¨ç†è«–ã§æœªæ¥ã‚’åˆ‡ã‚Šæ‹“ãå†·é™ãªç­–å£«ã€‚", affinity:["ENFJ","ENTP","INFP"], conflict:["ESFP","ESTP"], img:"https://cdn.pixabay.com/photo/2016/02/19/10/00/rottweiler-1209620_1280.jpg" },

  "ISTP": { name:"ã‚¸ãƒ£ãƒƒã‚¯ãƒ»ãƒ©ãƒƒã‚»ãƒ«ãƒ»ãƒ†ãƒªã‚¢", catch:"ç¬ç™ºåŠ›ã¨å¥½å¥‡å¿ƒã®ç‹¬ç«‹è€…", detail:"äº”æ„Ÿã§ä¸–ç•Œã‚’æ¢ã‚Šå³å¿œã™ã‚‹è‡ªç”±ã®å†’é™ºè€…ã€‚", affinity:["ESFJ","ISTP","ENTP"], conflict:["ENFJ","INFJ"], img:"https://cdn.pixabay.com/photo/2016/02/19/10/00/jack-russell-1209622_1280.jpg" },
  "ISFP": { name:"ãƒ‘ã‚°", catch:"ãƒã‚¤ãƒšãƒ¼ã‚¹ãªèŠ¸è¡“å®¶ã€äº”æ„Ÿã®è¡¨ç¾è€…", detail:"æ„Ÿæ€§ã‚’å¤§åˆ‡ã«ã—è‡ªåˆ†ã®ä¸–ç•Œã‚’æ„›ã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚", affinity:["ESTJ","ENTJ","ISFP"], conflict:["ENFJ","INFJ"], img:"https://cdn.pixabay.com/photo/2017/09/25/13/12/dog-2785075_1280.jpg" },
  "INFP": { name:"ãƒãƒ¯ãƒ¯", catch:"é™ã‹ã«ä¸–ç•Œã‚’æƒ³ã†ç†æƒ³ã®è©©äºº", detail:"ç¹Šç´°ã§æ·±ã„å†…é¢ã‚’æŒã¤ãƒ­ãƒãƒ³ãƒã‚¹ãƒˆã€‚", affinity:["ENFJ","ENTP","INFP"], conflict:["ESTJ","ESTP"], img:"https://cdn.pixabay.com/photo/2016/02/22/17/55/chihuahua-1210558_1280.jpg" },
  "INTP": { name:"ã‚¢ãƒ•ã‚¬ãƒ³ãƒ»ãƒã‚¦ãƒ³ãƒ‰", catch:"çŸ¥è­˜ã®æ¢æ±‚è€…ã€è«–ç†ã®èŠ¸è¡“å®¶", detail:"ç†è«–ã«è€½ã‚Šå•é¡Œã®æœ¬è³ªã‚’æ¢ã‚‹æ€ç´¢å®¶ã€‚", affinity:["ESFJ","ENTP","INTP"], conflict:["ESTJ","ESFP"], img:"https://cdn.pixabay.com/photo/2017/09/25/13/12/dog-2785076_1280.jpg" },

  "ESTP": { name:"ãƒœã‚¯ã‚µãƒ¼", catch:"å ´ã‚’å¤‰ãˆã‚‹è¡Œå‹•æ´¾ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼", detail:"è¡Œå‹•åŠ›ã¨å³æ–­ã§ç››ã‚Šä¸Šã’ã‚‹ç¾å ´ä¸»ç¾©è€…ã€‚", affinity:["ISTJ","ISFP","ESFP"], conflict:["INFP","INTJ"], img:"https://cdn.pixabay.com/photo/2016/02/22/17/55/boxer-1210559_1280.jpg" },
  "ESFP": { name:"ãƒ€ãƒ«ãƒ¡ã‚·ã‚¢ãƒ³", catch:"æ³¨ç›®ã‚’é›†ã‚ã‚‹ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ãªã‚¹ã‚¿ãƒ¼", detail:"äººã‚’æƒ¹ãä»˜ã‘ã‚‹æ˜ã‚‹ã•ã¨ç¬ç™ºåŠ›ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã€‚", affinity:["ISTP","ISFJ","ESTP"], conflict:["INTJ","ENTJ"], img:"https://cdn.pixabay.com/photo/2016/02/19/10/00/dalmatian-1209621_1280.jpg" },
  "ENFP": { name:"ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ»ãƒ¬ãƒˆãƒªãƒãƒ¼", catch:"ç„¡é™ã®æ„›ã‚’é…ã‚‹å¤ªé™½ã®çŠ¬", detail:"å¥½å¥‡å¿ƒæ—ºç››ã§äººã‚’å…ƒæ°—ã«ã™ã‚‹ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ã€‚", affinity:["ISTJ","INFJ","ENTJ"], conflict:["ISTP","ESTP"], img:"https://cdn.pixabay.com/photo/2017/09/25/13/12/dog-2785074_1280.jpg" },
  "ENTP": { name:"ãƒ—ãƒ¼ãƒ‰ãƒ«", catch:"è­°è«–ã‚’æ¥½ã—ã‚€çŸ¥çš„ãªå¤‰é©è€…", detail:"æ–°ã—ã„è¦–ç‚¹ã§å•é¡Œã‚’æ¥½ã—ã¿ãªãŒã‚‰è§£ãéŠæˆ¯è€…ã€‚", affinity:["ISTJ","INFJ","ENFP"], conflict:["ISFJ","ESFJ"], img:"https://cdn.pixabay.com/photo/2017/02/20/18/03/poodle-2089391_1280.jpg" },

  "ESTJ": { name:"ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ»ã‚·ã‚§ãƒ‘ãƒ¼ãƒ‰", catch:"ç”Ÿã¾ã‚ŒãªãŒã‚‰ã®ãƒªãƒ¼ãƒ€ãƒ¼ã€çµ±ç‡ã®çŠ¬", detail:"ç¾å®Ÿçš„åˆ¤æ–­ã§é›†å›£ã‚’ã¾ã¨ã‚ã‚ã’ã‚‹å®Ÿå‹™å®¶ã€‚", affinity:["ISFP","INFP","ESTJ"], conflict:["INFJ","ENTP"], img:"https://cdn.pixabay.com/photo/2017/07/31/11/22/german-shepherd-2559369_1280.jpg" },
  "ESFJ": { name:"ãƒãƒ«ãƒãƒ¼ã‚º", catch:"ç¤¾äº¤çš„ãªå¥³ç‹ã€æ„›æƒ…è¡¨ç¾ã®é”äºº", detail:"å‘¨å›²ã‚’æ°—é£ã„èª°ã¨ã§ã‚‚ä»²è‰¯ããªã‚‹ç¤¾äº¤å®¶ã€‚", affinity:["ISTP","INTP","ESFP"], conflict:["ENTP","INTJ"], img:"https://cdn.pixabay.com/photo/2017/09/25/13/12/dog-2785072_1280.jpg" },
  "ENFJ": { name:"ãƒ©ãƒ–ãƒ©ãƒ‰ãƒ¼ãƒ«ãƒ»ãƒ¬ãƒˆãƒªãƒãƒ¼", catch:"ç¾¤ã‚Œã‚’å°ãç©¶æ¥µã®èª¿å’Œä¸»ç¾©è€…", detail:"æ„Ÿæƒ…ã‚’èª­ã¿å–ã‚ŠãªãŒã‚‰äººã‚’ã¾ã¨ã‚ã‚‹å¤©æ€§ã®æŒ‡å°è€…ã€‚", affinity:["INFP","INTJ","ENFJ"], conflict:["ISTP","ESTP"], img:"https://cdn.pixabay.com/photo/2018/03/16/17/27/labrador-retriever-3231587_1280.jpg" },
  "ENTJ": { name:"ãƒ¯ã‚¤ãƒãƒ©ãƒŠãƒ¼", catch:"ç›®æ¨™é”æˆã®é¬¼ã€åœ§å€’çš„æ¨é€²åŠ›", detail:"å¼·ã„æ„å¿—ã§çµ„ç¹”ã‚’å‹•ã‹ã—æˆæœã‚’å‡ºã™æŒ‡æ®å®˜ã€‚", affinity:["INFP","INTJ","ENTJ"], conflict:["ISFP","ESFP"], img:"https://cdn.pixabay.com/photo/2018/03/29/17/20/weimaraner-3279448_1280.jpg" }
};

/* MBTIã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆQ1: E/I, Q2: S/N, Q3: T/F, Q4: J/Pï¼‰ */
function determineCode4() {
  const q1 = document.querySelector('input[name="q1"]:checked');
  const q2 = document.querySelector('input[name="q2"]:checked');
  const q3 = document.querySelector('input[name="q3"]:checked');
  const q4 = document.querySelector('input[name="q4"]:checked');
  if (!q1 || !q2 || !q3 || !q4) {
    alert("ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
    return null;
  }
  return q1.value + q2.value + q3.value + q4.value;
}

/* è¨ºæ–­å‡¦ç† */
function onDiagnose(){
  const code = determineCode4();
  if (!code) return;

  const type = DOG_TYPES[code];
  if (!type) {
    alert("è¨ºæ–­ã‚¿ã‚¤ãƒ—ãŒæœªç™»éŒ²ã§ã™ï¼ˆé–‹ç™ºä¸­ã®ã‚¿ã‚¤ãƒ—ï¼‰ã€‚çµæœã‚³ãƒ¼ãƒ‰: " + code);
    return;
  }

  const nameInput = document.getElementById("user-name").value.trim();
  const displayName = nameInput ? nameInput : "ã‚ãªãŸ";

  document.getElementById("diagnosed-name").textContent = `${displayName}ã•ã‚“ã®é­‚ã®çŠ¬ç¨®ã¯ã€${type.name}ã€‘`;
  document.getElementById("my-type-code").textContent = code;
  document.getElementById("show-my-type-inline").textContent = code;
  document.getElementById("dog-img").src = type.img;
  document.getElementById("dog-img").alt = type.name;
  document.getElementById("dog-catch").textContent = type.catch;
  document.getElementById("dog-detail").textContent = type.detail;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";
  document.getElementById("affinity-section").style.display = "block";

  localStorage.setItem("myDogType", code);

  const shareText = encodeURIComponent(`${displayName}ã•ã‚“ã®çŠ¬ã‚¿ã‚¤ãƒ—ã¯ã€${type.name}ã€‘ï¼ˆ${code}ï¼‰ ğŸ¶âœ¨`);
  const shareUrl = encodeURIComponent(location.href);
  document.getElementById("btn-share-x").href = `https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}`;

  const dl = document.getElementById("btn-download-image");
  dl.href = type.img;
  dl.download = `${code}_${type.name.replace(/\s+/g,'_')}.jpg`;
}

/* ç›¸æ€§è¨ºæ–­ */
function checkAffinity(){
  const myCode = localStorage.getItem("myDogType") || document.getElementById("my-type-code").textContent;
  const partner = (document.getElementById("partner-code").value || "").trim().toUpperCase();
  const out = document.getElementById("affinity-result");

  if (!myCode) { out.textContent = "ã¾ãšè¨ºæ–­ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"; return; }
  if (!partner) { out.textContent = "ç›¸æ‰‹ã®MBTIã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šENFPï¼‰"; return; }
  if (!DOG_TYPES[partner]) { out.textContent = "ãã®MBTIã‚³ãƒ¼ãƒ‰ã¯æœªç™»éŒ²ã§ã™ã€‚æ­£ã—ã„4æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"; return; }
  const myType = DOG_TYPES[myCode];
  const pType = DOG_TYPES[partner];

  let msg = "";
  if (myCode === partner) {
    msg = "ğŸ’š å…±é³´ã™ã‚‹ç›Ÿå‹ï¼åŒã˜ã‚¿ã‚¤ãƒ—ã©ã†ã—ã€æ·±ã„ç†è§£ãŒã‚ã‚Šã¾ã™ã€‚";
  } else if (myType.affinity && myType.affinity.includes(partner)) {
    msg = "ğŸ’– ç›¸æ€§æŠœç¾¤ï¼è£œã„åˆã£ã¦è‰¯ã„åŒ–å­¦åå¿œãŒèµ·ãã¾ã™ã€‚";
  } else if (myType.conflict && myType.conflict.includes(partner)) {
    msg = "âš¡ï¸ è¡çªã—ã‚„ã™ã„çµ„ã¿åˆã‚ã›ã€‚ä¾¡å€¤è¦³ã®é•ã„ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚";
  } else {
    msg = "ğŸ”· å®‰å®šã—ãŸé–¢ä¿‚ã€‚ãŠäº’ã„ã«å­¦ã³åˆãˆã‚‹è‰¯å¥½ãªé–¢ä¿‚ã§ã™ã€‚";
  }
  out.innerHTML = `<strong>${myType.name}ï¼ˆ${myCode}ï¼‰</strong> ã¨ <strong>${pType.name}ï¼ˆ${partner}ï¼‰</strong> ã®ç›¸æ€§ï¼š<br>${msg}`;
}

/* çµæœãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ */
function copyResult(){
  const name = document.getElementById("diagnosed-name").textContent || "";
  const code = document.getElementById("my-type-code").textContent || "";
  const detail = document.getElementById("dog-detail").textContent || "";
  const text = `${name}\nã‚¿ã‚¤ãƒ—ã‚³ãƒ¼ãƒ‰ï¼š${code}\n${detail}\n#MBTIãƒ¯ãƒ³ã‚³è¨ºæ–­`;
  navigator.clipboard?.writeText(text).then(()=> {
    alert("çµæœãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚SNSã«è²¼ã£ã¦ä½¿ã£ã¦ãã ã•ã„ï¼");
  }).catch(()=> {
    alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚");
  });
}

/* ãƒªã‚»ãƒƒãƒˆ */
function onReset(){
  document.querySelectorAll('input[type="radio"]').forEach(r=>r.checked=false);
  document.getElementById("user-name").value = "";
  document.getElementById("quiz").style.display = "block";
  document.getElementById("result").style.display = "none";
  document.getElementById("affinity-section").style.display = "none";
  document.getElementById("affinity-result").textContent = "";
  localStorage.removeItem("myDogType");
}

/* ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ä¿å­˜çµæœãŒã‚ã‚Œã°å¾©å…ƒ */
document.addEventListener("DOMContentLoaded", () => {
  const saved = localStorage.getItem("myDogType");
  if (saved && DOG_TYPES[saved]) {
    const code = saved;
    const type = DOG_TYPES[code];
    const displayName = "ã‚ãªãŸ";
    document.getElementById("diagnosed-name").textContent = `${displayName}ã•ã‚“ã®é­‚ã®çŠ¬ç¨®ã¯ã€${type.name}ã€‘`;
    document.getElementById("my-type-code").textContent = code;
    document.getElementById("show-my-type-inline").textContent = code;
    document.getElementById("dog-img").src = type.img;
    document.getElementById("dog-img").alt = type.name;
    document.getElementById("dog-catch").textContent = type.catch;
    document.getElementById("dog-detail").textContent = type.detail;
    document.getElementById("quiz").style.display = "none";
    document.getElementById("result").style.display = "block";
    document.getElementById("affinity-section").style.display = "block";
    const shareText = encodeURIComponent(`${displayName}ã•ã‚“ã®çŠ¬ã‚¿ã‚¤ãƒ—ã¯ã€${type.name}ã€‘ï¼ˆ${code}ï¼‰ ğŸ¶âœ¨`);
    document.getElementById("btn-share-x").href = `https://twitter.com/intent/tweet?text=${shareText}&url=${encodeURIComponent(location.href)}`;
    const dl = document.getElementById("btn-download-image");
    dl.href = type.img;
    dl.download = `${code}_${type.name.replace(/\s+/g,'_')}.jpg`;
  }
});
</script>
</body>
</html>






